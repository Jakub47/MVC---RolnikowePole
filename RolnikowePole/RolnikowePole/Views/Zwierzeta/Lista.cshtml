@model IEnumerable<RolnikowePole.Models.Zwierze>
@{
    ViewBag.Title = "Lista";
}

<div class="container">
    <div class="row">
        @Html.Action("GatunkiMenu", "Zwierzeta")        
        <div class="col-lg-9">
            @Html.Partial("_ZwierzetaList")
        </div>
    </div>
</div>
@section Scripts
{
    @System.Web.Optimization.Scripts.Render("~/bundles/jqueryAndjqueryUI")

    <script>
        $(function () {

            var setupAutoComplete = function () {

                //Przypisywanie inputu z naszego formularza!
                var $Input = $(this);

                var options =
                    {
                        source: $Input.attr("data-autocomplete-source"), //Żródło naszej podpowiedzi {Akcja}
                        select: function (event, ui) {
                            $Input = $(this);
                            $Input.val(ui.item.label);
                            var $form = $Input.parent("form:first");
                            $form.submit();
                            //Po kliknięciu w przycisku submit!
                        }
                    };
                $Input.autocomplete(options);
            };

            var ajaxSubmit = function () {
                var $form = $(this);

                var settings = {
                    data: $(this).serialize(),
                    url: $(this).attr("action"),
                    type: $(this).attr("method")
                };

                $.ajax(settings).done(function (result) {
                    var $targetElement = $($form.data("ajax-target"));
                    var $newContent = $(result);
                    $($targetElement).replaceWith($newContent);
                    $newContent.effect("slide");
                });

                return false;
            };

            $("#search-filter").each(setupAutoComplete);
            $("#search-form").submit(ajaxSubmit);
        })
    </script>
}

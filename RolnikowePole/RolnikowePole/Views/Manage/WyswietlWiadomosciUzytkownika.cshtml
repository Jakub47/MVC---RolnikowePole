@model List<RolnikowePole.ViewModels.WiadomoscZIdViewModel>

@using RolnikowePole.Infrastucture
@using Microsoft.AspNet.Identity;

@{
    ViewBag.Title = "WyswietlWiadomosciUzytkownika";
    Layout = "~/Views/Shared/_ManageLayout.cshtml";
}
<h2>Wiadomości : </h2>
<hr />


@if (Model.Count > 0)
{
    foreach (var item in Model)
    {
        if (item.Wiadomosc.Read == false && (User.Identity.GetUserId() == item.Wiadomosc.ReceiverId))
        {
            <a href="@Url.Action("WiadomosciKonwersacja", new { idZwierza = item.Wiadomosc.ZwierzeId, idUser = item.UserID, Otrzymane = true , w = item.Wiadomosc.WiadomoscId })" style="text-decoration: none; color:white;">
                <div class="media bg-info">
                    <img class="mr-3" style="width:64px; height: 64px;" src="@Url.ObrazkiSciezka(item.NazwaPliku)" alt="Generic placeholder image">
                    <div class="media-body">
                        <h5 class="mt-0">@item.Email | @item.NazwaZwierza | <text style="margin-left: 2px;">@item.Wiadomosc.DateAndTimeOfSend</text></h5>
                        <strong>@item.Wiadomosc.Body</strong>
                    </div>
                </div>
            </a>
            <hr />
        }
        else
        {
            <a href="@Url.Action("WiadomosciKonwersacja", new { idZwierza = item.Wiadomosc.ZwierzeId, idUser = item.UserID, Otrzymane = true })" style="text-decoration: none; color:white;">
                <div class="media bg-dark">
                    <img class="mr-3" style="width:64px; height: 64px;" src="@Url.ObrazkiSciezka(item.NazwaPliku)" alt="Generic placeholder image">
                    <div class="media-body">
                        <h5 class="mt-0">@item.Email | @item.NazwaZwierza | <text style="margin-left: 2px;">@item.Wiadomosc.DateAndTimeOfSend</text></h5>
                        <strong>@item.Wiadomosc.Body</strong>
                    </div>
                </div>
            </a>
            <hr />
        }
    }
}

@*<hr />
    <h2>Wiadomości wysłane:</h2>
    <hr />
    @if (Model.WiadomosciWyslane.Count > 0)
    {
        foreach (var item in Model.WiadomosciWyslane)
        {
            <a href="@Url.Action("WiadomosciKonwersacja", new { idZwierza = item.Zwierze.ZwierzeId , idUser =  item.Id })" style="text-decoration: none; color:white;">
                <div class="media bg-dark">
                    <img class="mr-3" style="width:64px; height: 64px;" src="@Url.ObrazkiSciezka(item.Zwierze.NazwaPlikuObrazka)" alt="Generic placeholder image">
                    <div class="media-body">
                        <h5 class="mt-0">@item.NazwaUzytkownika | @item.Zwierze.Nazwa | <text style="margin-left: 2px;">@item.DataWyslania</text></h5>
                        <strong>@item.TrescWiadomosci</strong>
                    </div>
                </div>
            </a>
        }
    }
    <hr />*@

@*@foreach (var item in Model)
    {
        <p>@item.ReceiverId</p>
    }*@


@*@if (Model.WiadomosciOtrzymane.Count() > 0)
    {
        <ul>
            @foreach (var item in Model.WiadomosciOtrzymane)
            {
                <li>
                    @item.Body <hr />
                </li>
            }
        </ul>
    }*@


@*@if (Model.WiadomosciWyslane.Count() > 0)
    {
        <ul>
            @foreach (var item in Model.WiadomosciWyslane)
            {
                <li>
                    @item.Body <hr />
                </li>
            }
        </ul>
    }*@
